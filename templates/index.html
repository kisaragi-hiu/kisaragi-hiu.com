{{ define "main" }}
{{ partial "faint-bg" "/illust/2018-12-31.jpg" }}
<div class="block lg:grid lg:gap-x-4 grid-cols-8">
  <main class="col-span-5">
    <h1 class="font-bold my-8">
      <span class="text-4xl">Kisaragi Hiu</span>
      <br />
      <span class="text-2xl">如月飛羽</span>
    </h1>
    {{ partial "content" . }}
    <hr class="my-8 opacity-50" />
    <!-- prettier-ignore -->
    {{ partial "searchable-list"
               (sort (union (where .Site.RegularPages "Section" "")
                            (where .Site.RegularPages "Section" "blog"))
                     "Date"
                     "desc")}}
  </main>
  <aside class="col-span-3">
    <!-- <nav class="flex flex-wrap justify-start gap-3 my-2"> -->
    <nav class="flex flex-col">
      <!-- prettier-ignore -->
      {{ range (slice (slice "/covers.html" "Covers")
                      (slice "/illust.html" "Illust")
                      (slice "/projects.html" "Projects")
                      (slice "/about.html" "About")
                      (slice "/index.xml" "RSS")) }}
      <a class="link" href="{{ index . 0 }}">{{ index . 1 }}</a>
      {{ end }}
    </nav>
    <!-- prettier-ignore -->
    {{ $covers_featured := (slice) }}
    {{ range (where .Site.RegularPages "Section" "covers") }}
      {{ if (eq (.Date.Format "2006-01") (now.Format "2006-01")) }}
        {{ $covers_featured = $covers_featured | append .}}
      {{ end }}
    {{ end }}
    {{ with $covers_featured }}
    <h1 class="font-bold mt-4">
      <a class="text-primary" href="/covers.html"
        >Covers ({{now.Format "2006-01"}})</a
      >
    </h1>
    {{ partial "covers" . }} {{end}}
    <!-- prettier-ignore -->
    {{ $illust_featured := (slice) }}
    {{ range (where .Site.RegularPages "Section" "illust") }}
      {{ if (eq (.Date.Format "2006-01") (now.Format "2006-01")) }}
        {{ $illust_featured = $illust_featured | append .}}
      {{ end }}
    {{ end }}
    {{ with $illust_featured }}
    <h1 class="font-bold mt-4">
      <a class="text-primary" href="/illust.html"
        >Illustrations ({{now.Format "2006-01"}})</a
      >
    </h1>
    {{ partial "illustrations" . }}
    {{end}}
    <!-- prettier-ignore -->
  </aside>
</div>
{{ end }}
